# Managed by Ansible
# DO NOT EDIT, changes will be overwritten.

client

dev {{ openvpn_client.dev | default("tun") }}

proto {{ openvpn_client.proto | default("udp") }}

{% for remote in openvpn_client.remotes -%}
remote {{ remote }}
{% endfor %}

{% if openvpn_client.crl is defined -%}
crl-verify {{ openvpn_common_config_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}/crl.pem
{% endif %}

{% if openvpn_client.ta_key is defined -%}
tls-auth {{ openvpn_common_config_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}/ta.key 1
{% endif %}

{% if openvpn_client.cipher is defined -%}
cipher {{ openvpn_client.cipher }}
{% endif %}

resolv-retry infinite

nobind

user {{ openvpn_client.user | default('nobody') }}
group {{ openvpn_client.group | default('nogroup') }}

{# TODO: % if openvpn_client.use_status_file | default(True) -%#}
status {{ openvpn_common_status_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}.status
{#% endif %#}

{# TODO: % if openvpn_client.use_log_file | default(True) -%#}
log-append  {{ openvpn_common_log_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}.log
{#% endif %#}

persist-key
persist-tun

ca {{ openvpn_common_config_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}/ca.crt
cert {{ openvpn_common_config_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}/client.crt
key {{ openvpn_common_config_dir }}/{{ openvpn_client.client_name }}@{{ openvpn_client.vpn_name }}/client.key

ns-cert-type server

keepalive {{ openvpn_client.keepalive | default('10 120') }}

{% if openvpn_client.comp_lzo | default(False) -%}
comp-lzo
{% endif %}

verb {{ openvpn_client.verb | default(1) }}

script-security {{ openvpn_client.script_security | default(1) }}

{% for option in openvpn_client.options | default([]) -%}
{{ option }}
{% endfor %}
